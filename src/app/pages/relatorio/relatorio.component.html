@if (isLoading) {
  <div class="loading-container">
    <ion-spinner name="crescent"></ion-spinner>
    <p>Carregando relatório...</p>
  </div>
} @else {
  <div class="relatorio-container">
    <!-- Card À Receber -->
    <div class="chart-card">
      <div class="card-header">
        <div class="card-icon receber">
          <ion-icon name="wallet-outline"></ion-icon>
        </div>
        <div class="card-title">
          <h3>À Receber</h3>
          <span>Total ativo</span>
        </div>
      </div>
      <div class="gauge-wrapper">
        <apx-chart
          [series]="gaugeOptions.series"
          [chart]="gaugeOptions.chart"
          [plotOptions]="gaugeOptions.plotOptions"
          [colors]="gaugeOptions.colors"
          [labels]="gaugeOptions.labels"
          [stroke]="gaugeOptions.stroke"
        >
        </apx-chart>
      </div>
      <div class="gauge-info">
        <div class="info-item">
          <span class="label">Meta</span>
          <span class="value">R$ {{ userMeta | number:'1.0-0':'pt-BR' }}</span>
        </div>
        <div class="info-item">
          <span class="label">Total</span>
          <span class="value success">R$ {{ stats?.totalToReceive | number:'1.2-2':'pt-BR' }}</span>
        </div>
        <div class="info-item">
          <span class="label">Atrasados</span>
          <span class="value warning">{{ stats?.overdueCount || 0 }}</span>
        </div>
      </div>
    </div>

    <!-- Card Receita Mensal -->
    <div class="chart-card">
      <div class="card-header">
        <div class="card-icon receita">
          <ion-icon name="trending-up-outline"></ion-icon>
        </div>
        <div class="card-title">
          <h3>Empréstimos</h3>
          <span>Últimos 6 meses</span>
        </div>
      </div>
      <div class="area-chart-wrapper">
        <apx-chart
          [series]="areaSeries"
          [chart]="areaChartOptions"
          [xaxis]="areaXAxis"
          [yaxis]="areaYAxis"
          [dataLabels]="areaDataLabels"
          [stroke]="areaStroke"
          [fill]="areaFill"
          [colors]="areaColors"
          [grid]="areaGrid"
          [tooltip]="areaTooltip"
        >
        </apx-chart>
      </div>
    </div>

    <!-- Card Resumo -->
    <div class="chart-card summary-card">
      <div class="card-header">
        <div class="card-title">
          <h3>Resumo</h3>
        </div>
      </div>
      <div class="summary-grid">
        <div class="summary-item">
          <span class="summary-value">{{ stats?.totalLoans || 0 }}</span>
          <span class="summary-label">Empréstimos ativos</span>
        </div>
        <div class="summary-item">
          <span class="summary-value warning">{{ stats?.overdueCount || 0 }}</span>
          <span class="summary-label">Atrasados</span>
        </div>
        <div class="summary-item">
          <span class="summary-value success">R$ {{ stats?.monthlyValue | number:'1.0-0':'pt-BR' }}</span>
          <span class="summary-label">Vence este mês</span>
        </div>
        <div class="summary-item">
          <span class="summary-value danger">R$ {{ stats?.overdueValue | number:'1.0-0':'pt-BR' }}</span>
          <span class="summary-label">Valor atrasado</span>
        </div>
      </div>
    </div>
  </div>
}
