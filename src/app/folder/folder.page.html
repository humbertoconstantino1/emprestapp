@if(folder === 'emprestimos'){
<ion-content class="page-content">
  <div class="page-header">
    <ion-button fill="clear" class="back-btn" routerLink="/home">
      <ion-icon name="arrow-back-outline" slot="start"></ion-icon>
      Voltar
    </ion-button>
    <h1>Emprestados</h1>
  </div>

  @if (isLoading) {
  <div class="loading-container">
    <ion-spinner name="crescent"></ion-spinner>
    <p>Carregando empréstimos...</p>
  </div>
  } @else if (loans.length === 0) {
  <div class="empty-container">
    <p>Nenhum empréstimo ativo encontrado.</p>
    <ion-button routerLink="/folder/novo-emprestimo">
      Criar novo empréstimo
    </ion-button>
  </div>
  } @else {
  <!-- Filtros -->
  <div class="filters-container">
    <ion-item class="filter-item">
      <ion-icon name="search-outline" slot="start"></ion-icon>
      <ion-input
        placeholder="Filtrar por nome"
        [value]="filterNome"
        (ionInput)="onFilterNomeChange($event)"
        clearOnEdit="true"
      ></ion-input>
    </ion-item>

    <ion-item class="filter-item">
      <ion-icon name="calendar-outline" slot="start"></ion-icon>
      <ion-label position="stacked">Data de vencimento</ion-label>
      <ion-input
        type="date"
        [value]="filterData"
        (ionInput)="onFilterDataChange($event)"
        (ionChange)="onFilterDataChange($event)"
      ></ion-input>
    </ion-item>

    <ion-button fill="clear" size="small" (click)="exportFilteredLoans()">
      Exportar Empréstimos
    </ion-button>

    @if (filterNome || filterData) {
    <ion-button
      fill="clear"
      size="small"
      (click)="clearFilters()"
      class="clear-filter-btn"
    >
      <ion-icon name="close-outline" slot="start"></ion-icon>
      Limpar filtros
    </ion-button>
    }
  </div>

  @if (filteredLoans.length === 0) {
  <div class="empty-container">
    <p>Nenhum empréstimo encontrado com os filtros aplicados.</p>
    @if (filterNome || filterData) {
    <ion-button fill="outline" (click)="clearFilters()">
      Limpar filtros
    </ion-button>
    }
  </div>
  } @else {
  <ion-grid>
    <ion-row>
      <ion-col size="12" size-md="6">
        @for (loan of filteredLoans; track loan.id) {
        <app-card
          [firstName]="loan.nome"
          [observation]="loan.observacoes || ''"
          [atrased]="isOverdue(loan)"
          [valor]="loan.valor"
          [juros]="loan.juros || 0"
          [dataVencimento]="loan.dataVencimento"
          [emprestimoId]="loan.id"
          (finalize)="onFinalizeLoan($event)"
          (update)="onUpdateLoan($event)"
          (renew)="onRenewLoan($event)"
          (delete)="onDeleteLoan($event)"
        ></app-card>
        }
      </ion-col>
    </ion-row>
  </ion-grid>
  } }
</ion-content>
} @if(folder === 'novo-emprestimo'){
<ion-content>
  <app-new-emprestimo></app-new-emprestimo>
</ion-content>
} @if(folder === 'relatorio'){
<ion-content class="page-content">
  <div class="page-header">
    <ion-button fill="clear" class="back-btn" routerLink="/home">
      <ion-icon name="arrow-back-outline" slot="start"></ion-icon>
      Voltar
    </ion-button>
    <h1>Relatório</h1>
  </div>
  <app-relatorio></app-relatorio>
</ion-content>
}
